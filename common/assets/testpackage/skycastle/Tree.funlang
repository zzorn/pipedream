
module Tree {

    import skycastle.utils.Branch
    import skycastle.utils.MathUtils.*

    fun tree(height = 1): Model = {
      module TreeType {
        val Birch = 1
        val Fir = 2
      }

      fun leafCalculator(x: double): Leaf = foo(2, 45*x)
      val rootHeight = height / 2
      return [
        many(skycastle.utils.MathUtils.foo(rootHeight))
        many(Branch.branch)
        foo([lerp(1), Branch.branch(2), leafCalculator(3)])
      ]
    }
}
